<!DOCTYPE html>
<html>
<head>
<title>Paint 4.0 Perfect</title>
<link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB7SURBVDhPY/z//z8DuYAJSpMF8Go+xQ9l4ACEbMarn0bOhtuJ23KKbAZHFaGAwQ7MPoJtNvsI5pECwFpgziZJP0wxRgrD7wVUOzACDI8TMKQoCm0MzXicjSGF12agO/H4AqdmZG14jACGNgKc5AMhPABVdpAWBvgBAwMAYZ1bUMYE+eMAAAAASUVORK5CYII="/>
<style type="text/css">
::-webkit-scrollbar { 
width: 6px;
height: 0px;
background-color: white;
}
::-webkit-scrollbar-thumb { 
background-color: grey;
border-radius: 10px;
}
.inps {
width: 400px;
height: 30px;
position: absolute;
z-index: 10;
}
.swh {
width: 26px;
height: 26px;
border-radius: 13px;
border: solid;
border-width: 2px;
margin-left: 8px;
}
.ves {
cursor: pointer;
}
.ves:hover {
border: solid;
border-width: 1px;
}
#cont3 {
display: none;
width: 300px;
height: 150px;
position: fixed;
z-index: 5;
background-color: #ffffffe3;
border: solid;
border-width: 1px;
border-radius: 40px/150px;
top: 0px;
}
#pmasc {
display: none;
width: 300px;
height: 150px;
position: fixed;
z-index: 10;
background-color: #ffffffb5;
border: solid;
border-width: 1px;
border-radius: 40px/150px;
top: 0px;
}
#fonter {
font-size: 200%;
margin-top: 25px;
text-align: center;
}
#grafic {
background-color: yellow;
height: 5px;
margin-top: 130px;
border-radius: 3px;
width: 280px;
margin-left: 10px;
}
#dn {
background-color: #e2c0c0;
border: solid;
border-width: 1px;
width: 200px;
height: 25px;
text-align: center;
margin-left: 80px;
border-radius: 12px;
font-size: 110%;
cursor: pointer;
margin-top: 20px;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
}
#cont2 {
display: none;
}
.sizes {
margin-left: 55px;
font-size: 130%;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
}
#bb {
width: 500px;
height: 30px;
background-color: #8bc34a;
cursor: pointer;
text-align: center;
font-size: 150%;
padding: 10px;
position: absolute;
z-index: 11;
}
#bb:hover {
background-color: #4caf50;
}
#base {
position: absolute;
z-index: 2;
display: block;
background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAA1SURBVDhP7dWhAQAwDAJB0v23gr3aiG4AklOot8xdCJGE83dMg74GfQ36GvTFg0MydgEA8ACKpwm3iwFeXgAAAABJRU5ErkJggg==');
background-repeat: repeat;
border: solid;
border-width: 1px;
background-color: white;
}
#prog {
position: fixed;
z-index: 4;
display: block;
border: solid;
border-width: 1px;
margin-left: -50px;
background-color: #ffffffb5;
}
.toog:hover {
border: solid;
border-width: 1px;
}
.toog {
width: 20px;
height: 20px;
margin-left: 55px;
margin-top: 10px;
border-radius: 5px;
}
.guc {
margin-left: 50px;
margin-top: 40px;
}
#view {
border: solid;
border-width: 1px;
width: 120px;
height: 120px;
margin-top: 10px;
margin-bottom: 10px;
}
.butt {
width: 140px;
height: 25px;
text-align: center;
font-size: 115%;
margin-bottom: 5px;
cursor: pointer;
color: white;
}
#but1 {
background-color: #7b9a1ded;
margin-left: 340px;
}
#but2 {
position: absolute;
background-color: #6d4c4c;
margin-left: 190px;
margin-top: -30px;
}
#k {
position: absolute;
width: 280px;
height: 180px;
border: solid;
margin-left: 200px;
margin-top: -200px;
border-width: 1px;
border-radius: 10px;
}
.in {
margin-bottom: 5px;
height: 27px;
}
#cont4 {
border-radius: 20px;
width: 500px;
background-color: #e5fba9;
height: 350px;
position: fixed;
 z-index: 200;
 display: none;
}
</style>
<body style="margin: 0px;background-color: #88a04617">
<!--Fill Circles, save colors and more...-->
<div id="cont1">
<div id="bb" onclick="begin()">begin work</div>
<input id="inp1" class="inps" placeholder="canvas width"/>
<input id="inp2" class="inps" placeholder="canvas height"/>
<canvas id="nws" style="display: block; "></canvas>
</div>
<div id="cont2">
<canvas id="base"></canvas>
<canvas id="prog" style="display: none;"></canvas>
<input id="filltext"style="position: absolute; display: none; z-index: 90; width: auto">
<div style="z-index: 76; position: fixed; border: 1px solid;  width: 100px; margin-left: -50px; background-color: #fff;" id="ra">
 <div style="z-index: 77; position: fixed; width: 100px; margin-left: 0px; "id="re">
</div>       
    </div>
</div>
<div id="cont3">
<div id="red" class="swh" onmousedown="startChange('red')"></div>
<div id="green" class="swh" onmousedown="startChange('green')"></div>
<div id="blue" class="swh" onmousedown="startChange('blue')"></div>
<div id="dn" onclick="save()">s a v e</div>
</div>
<canvas id="pmasc"></canvas>
<fieldset id="cont4">
<div id="colon1" style="margin-top: 40px;">
<legend><input type="file" style="margin-top: 10px" id="s"/></legend>
<legend><div id="view"></div></legend>
<legend><input id="inpL" class="in" type="number" placeholder=" Left (auto)"/></legend>
<legend><input id="inpT" class="in" type="number"  placeholder=" Top (auto)"/></legend>
</div>
<div id="k"></div>
<div class="butt" id="but1" onclick="pastImage()">Past</div>
<div class="butt" id="but2" onclick="canselImage()">Break</div>
</fieldset>
<script type="text/javascript">
var g = innerWidth
var j = innerHeight
function ravn(name,width,height,rel) {
var f = document.getElementById(name).style
if(rel == undefined) {
f.marginLeft = (g - width)/2 + 'px'
f.marginTop = (j - height)/2 + 'px'
}
if(rel == 'w') { f.marginLeft = (g - width)/2 + 'px'; return (g - width)/2 }
if(rel == 'h') { f.marginTop = (j - height)/2 + 'px'; return (j - height)/2 }
}
	function get(name,text,context) {
        if(context == 'get') { var f =  'window.' + name + '= document.getElementById("' + text + '")'
	eval(f)
 	} if(context == undefined) { var f = document.getElementById(text).style; return f } 
	if(context == 'em') {
	var f = document.getElementById(text); return f } 
	if(context == 'var') { eval('window.' + name + ' = "' + text + '"'); } }
var R = 0;
var G = 0;
var B = 0;
var A = 1; var t; var imgDatas = []
function nowC(r,g,b,a) { 
R = r; G = g; B = b; A = a;
var f = 'rgba(' + R + ',' + G + ',' + B + ',' + A + ')'
ctx.strokeStyle = f; ctx.fillStyle = f; prg.fillStyle = f; prg.fillRect(0,0,300,j); prg.clearRect(0,0,300,ra)
nbn.fillStyle = "rgba(279,271,182,1)";
ctx.lineWidth = wd;
ctx.lineCap = 'round';
return f
 }
function line(s1,s2,s3,s4) { ctx.beginPath(); ctx.moveTo(s1,s2); ctx.lineTo(s3,s4); ctx.stroke() }
window.onresize = function() { figure() }
var rnd = 'not created'
window.onload = function() { rnd = Math.floor(Math.random() * 2); figure() }
function figure() { 
j = innerHeight
g = innerWidth
if(made == true) {
pc.height = j - 2; pc.width = 100;
pc.style.borderRadius = '100px/' + j + 'px'
get(null,'ra').height = innerHeight - 2 + 'px'
get(null,'ra').borderRadius = '100px/' + j + 'px'
get(null,'re').height = j * 0.9 + 'px'
get(null,'re').marginTop = j/10 + 'px'
ravn('cont3',300,j); ravn('pmasc',300,j); ravn('cont4',500,400)
if(bc.width < innerWidth) { lf = ravn('base',bc.width,null,'w') }
if(bc.height < innerHeight) { tp = ravn('base',null,bc.height,'h') }
}
if(made == 2) { ravn('cont4',500,400)
get(null,'ra').height = innerHeight - 2 + 'px'
get(null,'re').height = j * 0.9 + 'px'
get(null,'re').marginTop = j/10 + 'px'
get(null,'ra').borderRadius = '100px/' + j + 'px'
pc.height = j - 2; pc.width = 100;
pc.style.borderRadius = '100px/' + j + 'px'
ravn('cont3',300,j); ravn('pmasc',300,j);
if(bc.width < innerWidth) { lf = ravn('base',bc.width,null,'w') }
if(bc.height < innerHeight) { tp = ravn('base',null,bc.height,'h') }
 } 
if(made == false) { get('fornews','nws','get'); 
get(null,'ra').height = innerHeight - 2 + 'px'
get(null,'re').height = j * 0.9 + 'px'
get(null,'re').marginTop = j/10 + 'px'
get(null,'ra').borderRadius = '100px/' + j + 'px'
pc.height = j - 2; pc.width = 100;
pc.style.borderRadius = '100px/' + j + 'px'
ravn('cont3',300,j); ravn('pmasc',300,j); ravn('cont4',500,400)
fornews.height = j;fornews.width = g; var loadcanv  = fornews.getContext('2d')
var today = new Image();
if(rnd == 'not created') {
today.src = ``
}
if(rnd == 0) {
today.src = `
data:image/png;base64,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`
}
if(rnd == 1) {
today.src = `data:image/png;base64,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`
}
ravn('bb',500,-40); ravn('inp1',320,220); ravn('inp2',400,80);
today.onload = function() {
for(var x = 0 - today.width/2; x < innerWidth; x += today.width) {
for(var y = 0 - today.height/2; y < innerHeight; y += today.height) {
loadcanv.drawImage(today,x,y)
} } } } }
//_________________________
if(localStorage.getItem('lastWidth') != null) { get(null,'inp1','em').value = localStorage.getItem('lastWidth') }
if(localStorage.getItem('lastHeight') != null) { get(null,'inp2','em').value = localStorage.getItem('lastHeight') }
//_______________________________________________________________________________________
get('bc','base','get'); get('pc','prog','get'); get('bn','pmasc','get');
var ctx = bc.getContext('2d'); var prg = pc.getContext('2d'); var nbn = bn.getContext('2d')
//___________________________________________________________________________
var made = false; var lf = 0,tp = 0;
function begin() { made = true;
get(null,'cont1').display = 'none'
get(null,'cont2').display = 'block'
get(null,'cont3').display = 'block'
get('w','inp1','get'); get('h','inp2','get');
if(w.value == "") { bc.width = g - 2; localStorage.setItem('lastWidth',"") } else { bc.width =  eval(w.value);
localStorage.setItem('lastWidth',w.value); if(bc.width < g) { lf = ravn('base',bc.width,null,'w') } }
if(h.value == "") { bc.height = j - 2; localStorage.setItem('lastHeight',"") } else { bc.height = eval(h.value);
localStorage.setItem('lastHeight',h.value); if(bc.height < j) { tp = ravn('base',null,bc.height,'h') }
imgDatas[0] = []
t = ctx.getImageData(0,0,bc.width,bc.height)
imgDatas[0][0] = t; imgDatas[0][1] = 'bc.width = ' + bc.width + '; bc.height = ' + bc.height + ';'
 	} 	
		}
var a,b,c,d,celector,draw,obj,jud,ra,wd = 10,mode = 'draw',fixA,fixB;
document.onmousemove = function(e) {
fixA = e.pageX; fixB = e.pageY
	if(made == true) { nowC(R,G,B,A) }
if(jud == true) { 
ra = e.y; for(var z = 0; (z * j)/10 < e.y; z++) { A = 1 - z/10;
	}
		 }
if(obj != undefined) { 
if(Math.floor(e.x - g/2 + 150) > -1) {
if(Math.floor(e.x - g/2 + 150) < 301) { 
get(null,obj).marginLeft = e.x - g/2 + 135 + "px"
if(get(null,'prog').display == 'none') { get(null,'prog').display = 'block'; get(null,'ra').display = 'none' }
switch(obj) { 
case 'red': 
R = Math.floor(e.x - g/2 + 150)
break
case 'blue': 
B = Math.floor(e.x - g/2 + 150) 
break
case 'green': 
G = Math.floor(e.x - g/2 + 150) 
}
	}  }  }

if(draw == 'delete') { 
for( var i = 0 ; i < Math.round( Math.PI * wd) ; i++ ){
 
var angle = ( i / Math.round( Math.PI * wd )) * 360;
 
ctx.clearRect(e.pageX-lf,e.pageY-tp,Math.sin(angle*(Math.PI/180))*wd,Math.cos(angle*(Math.PI/180))*wd) 

	} 
		}
if(celector == undefined) { celector = null; a = e.pageX - lf; b = e.pageY - tp
if(draw == 'draw') { line(c,d,a,b) } }
if(draw == 'sp') { line(a,b - wd,c,d) }
if(celector == null) { celector = undefined;c = e.pageX - lf; d = e.pageY - tp; 
if(draw == 'sp') { line(a,b - wd,c,d) }
if(draw == 'draw') { line(a,b,c,d) } 
	} 
		}
function startChange(thisObject) { obj = thisObject }
document.onmouseup = function() { if(draw == mode) { savecanv(); draw = null } obj = undefined; jud = false }
bc.onmousedown = function() { draw = mode; }
pc.onmousedown = function() { jud = true }
var colorClicker = false
document.onkeyup = function(e) { 
	if(e.code == 'KeyW') { get(null,'pmasc').display = 'none' }
	if(e.code == 'KeyC') { clearImage = false; colorClicker = false } 
	if(e.code == 'KeyD') { mode = 'draw'; bc.style.cursor = 'default' }
	if(e.code == 'KeyF') { mode = 'draw' } }

document.getElementById('pmasc').onmousemove = function(e) { 
nbn.fillRect(0,0,300,150)
nbn.clearRect(300,0,0 - (300 - e.layerX),150)
wd = e.layerX;
//nbn.font = "20px Georgia";
//nbn.fillText(wd, 10, 10)
}
</script>
<script type="text/javascript">
//________________________________________________________________________________________
//________________________________________________________________________________________
var im = new Image(); var clearImage;
var isformat = false; var nfh;
//______________________
//_________________________________________
var Url;
//_________________________
document.getElementById('s').oninput = function() {
var file = document.getElementById('s').files[0]
  let reader = new FileReader()
  reader.readAsDataURL(file)
  reader.onloadend = function() { Url = reader.result; previewImage(Url) }
  }
//________________________________
function previewImage(Src) {
document.getElementById('view').innerHTML = `<img width="120" height="120" onclick="formt()" src="` + Src + `"/>`
}
document.onkeydown = function(e) { 
if(made == false) { 
if(e.key == 'Enter') { begin() } 
if(e.key == ' ') { begin() }
}
if(made == true) { if(e.code == 'KeyW') { get(null,'pmasc').display = 'block' }
if(e.code == 'KeyR') { fd = 0; ctx.clearRect(0,0,bc.width,bc.height); savecanv() }
if(e.code == 'KeyE') { ctx.fill(); savecanv() }
if(e.code == 'KeyG') { var f = prompt('Radius?'); if(f != null) { ctx.beginPath(); ctx.arc(fixA - lf,fixB - tp,f,0,2 * Math.PI,false); ctx.stroke(); savecanv() } }
if(e.code == 'KeyX') { if(get(null,'cont3').display == 'none') { get(null,'cont3').display = 'block' } else { get(null,'cont3').display = 'none' } }
if(e.code == 'KeyP') { fd = 0; if(isformat == false) { ctx.drawImage(im,leftCh(),topCh()); savecanv() } if(isformat == true) { bc.height = im.height * bc.width/im.width; ctx.drawImage(im,0,0,bc.width,im.height * bc.width/im.width) 
if(bc.height < j) { tp = ravn('base',null,bc.height,'h') } else { tp = 0; bc.style.marginTop = '0px' } 
savecanv() }  }
if(e.code == 'KeyO') { get(null,'cont4').display = 'block'; made = 2 }
if(e.code == 'KeyU') { contrLeftPanel() }
if(e.code == 'KeyD') { mode = 'delete'; bc.style.cursor = 'not-allowed' }
if(e.code == 'KeyF') { mode = 'sp' }
if(e.code == 'KeyL') { trytext() }
if(e.key == '1') { wd = 1;nbn.fillRect(0,0,300,150); nbn.clearRect(300,0,0 - 299,150) }
if(e.key == '5') { wd = 5;nbn.fillRect(0,0,300,150); nbn.clearRect(300,0,0 - 295,150) }
if(e.key == '=') { var f = t; if(fd < 15) { fd++ } else { fd = 0 }; ctx.putImageData(contrastImage(f,fd/10),0,0); savecanv() }
if(e.key == '-') { var f = t; if(fd > -15) { fd-- } else { fd = 0 }; ctx.putImageData(contrastImage(f,fd/10),0,0); savecanv() }
if(e.code == 'KeyS') { t = ctx.getImageData(0,0,bc.width,bc.height); }
if(e.code == 'KeyZ') {
if(fute > 0) { fute--; 
eval(imgDatas[fute][1]); 
if(bc.height < j) { tp = ravn('base',null,bc.height,'h') } else { tp = ravn('base',null,j,'h') }
if(bc.width < g) { lf = ravn('base',bc.width,null,'w') } else { lf = ravn('base',g,null,'w') }
ctx.putImageData(imgDatas[fute][0],0,0); } }
if(e.code == 'KeyC') { colorClicker = true;  }
if(e.code == 'KeyA') {  ctx.putImageData(t,0,0);  }
if(e.code == 'KeyY') { var n1 = window.prompt('width?'); var n2 = window.prompt('height?'); ctx.strokeRect(fixA - n1/2 - lf,fixB - n2/2 - tp,n1,n2); savecanv()  } 
if(e.code == 'KeyT') { var n1 = window.prompt('width?'); var n2 = window.prompt('height?'); ctx.fillRect(fixA - n1/2 - lf,fixB - n2/2 - tp,n1,n2); savecanv()  } 
if(e.code == 'KeyV') { ctx.drawImage(im,fixA - im.width/2 - lf,fixB - im.height/2 - tp); savecanv() }
if(e.code == 'KeyK') {  if(bc.style.backgroundImage != 'none') { bc.style.backgroundImage = "none"} else { bc.style.backgroundImage = `
url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAA1SURBVDhP7dWhAQAwDAJB0v23gr3aiG4AklOot8xdCJGE83dMg74GfQ36GvTFg0MydgEA8ACKpwm3iwFeXgAAAABJRU5ErkJggg==')` } }
if(e.code == 'KeyH') { if(nfh != undefined) { bc.height = nfh; bc.style.marginTop = (innerHeight - nfh)/2 + 'px'; tp = (innerHeight - nfh)/2 } }
 }; if(made == 2) { if(e.key == 'Enter') { pastImage() } if(e.key == 'c') { clearImage = true;  } 
if(e.key == 'Escape') { get(null,'cont4').display = 'none'; made = true }
	} 
if(made == 3) { 
if(e.key == 'Enter') { textFill() } 
if(e.key == 'Escape') { document.getElementById('filltext').style.display = 'none'; made = true } }
	    }
var foo = 'do'
function pastImage() { get(null,'cont4').display = 'none'; made = true; foo = 'do'
if(Url != undefined) { im.src = Url }

im.onload = function() { if(foo == 'do') { loadBoofer() } }
var imLeft;
var imTop;
function leftCh() { if(imLeft != "") { return eval(imLeft) } else { return (bc.width - im.width)/2 } }
function topCh() { if(imTop != "") { return eval(imTop) } else { return (bc.height - im.height)/2 } } 

function loadBoofer() { console.log('load image.. ' + im.src)

 imLeft = document.getElementById('inpL').value
 imTop = document.getElementById('inpT').value

if(isformat == false) { ctx.drawImage(im,leftCh(),topCh()); } if(isformat == true) { nfh = bc.height; bc.height = im.height * bc.width/im.width; ctx.drawImage(im,0,0,bc.width,im.height * bc.width/im.width)
if(bc.height < innerHeight) { bc.style.marginTop = (innerHeight - bc.height)/2 + 'px'; tp = (innerHeight - bc.height)/2; } if(bc.height >= innerHeight) { tp = 0; bc.style.marginTop = '0px'  
 } } savecanv() } } //________________RaRE

function canselImage() { get(null,'cont4').display = 'none'; made = true; foo = 'no'; im.src = Url }

function formt() { var w = document.getElementById('view'); if(isformat == false) { 
isformat = true; w.style.borderWidth = '2px'; 
 } else {
 isformat = false; w.style.borderWidth = '1px';
	} }

function contrLeftPanel() {
var e = document.getElementById('prog')
if(e.style.display == 'none') { e.style.display = 'block'; get(null,'ra').display = 'none' }
else { e.style.display = 'none'; get(null,'ra').display = 'block' }
}
function dodo(nameOf) { 
var a,b,c,d
function f(e,name) { var g = ' '; sp = e; for(var t = e; localStorage.getItem(name)[t] != ","; t++) { sp++
g = g + localStorage.getItem(name)[t] } return eval(g) }
a = f(0,nameOf); b = f(sp + 1,nameOf); c = f(sp + 1,nameOf); d = f(sp + 1,nameOf); 
return 'rgba(' + a + ',' + b + ',' + c + ',' + d + ')'
 }
var i; hm()
function hm() {
var D = ' '; search()
function search() {
for(i = 1;localStorage.getItem('t' + i) != null; i++) {
if(localStorage.getItem('t' + i) != " ") {
D = D + `<div class="toog" id="t`+i+`" style="background-color: `+ dodo('t' + i) + `; color:`+dodo('t' + i)
+`"onclick="handle('t` + i + `')"></div>`
 } } }
if(D == ' ') { D = `<img class="guc" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAEsCAYAAAA2KRjJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAVISURBVHhe7Zw/cuJKEMabPQs4c
HGC4QSsE0ekm4nQJC/DmbOXQLhkmxK5ygXcQCdwObB0F73p0cgLsjTTnwS71HP/qlRGcpU+5g/dre4ZDQoLXZhv/u9FUREIFYFQEQgVgYBEDvMBDQYDmh/8BSls6mXsi4RMkSSmoGTvr8mQi+yTgsyqyLJVYSixknLEIvuECrPK7KesWJnqswyZiPv2pqjum61sl3
GrytMoIpFPN62JxhCIlN3Dc6R+SLssLsID3vCtXeuEEyAqwgPePGV5SlMhmc0aEkGoCMQVixzmNJisKfenMb5ad+Vrmli3y653MJjQ+t1fl+KMS5C6kypt1nn9SZO7rVyxP40R767sjVL/sStxkdEtGf+xK3GR4Q2NaUNPa/+r4EnwfVN+luK7LYwbl8rt2vHhc2B
M1GlBqAjEVxdRzxhEPaMn3l3qGY/x3RZGPaNHRSBUBEJFIFQEQkUgVATiC4msJzbIrpV+XEUIKQe5wChEPVfvYjB5xYERBXfH+fr23H07QATpI0ewFYxMxOJawGEq2ApGLNL4nCJEf4wQ+ugAoSIQApG8NPcfuZU5oTX/iFnxdd8je4WUYyvCIo32qlxhgFjicHc1
5lVGdGtSesv8qYCwSGNeJaO31NDtyJ9K8C1qoWVMgJQHI/AnPolWHaAAowYSQkUgrkGktMAnsTVYDGB0TCCuQWRIN2OizbMf+S7ZbcaZySDHVth6SbDiwKgVhlARiGsQqcfB3WJhUUvMKuMfrTv2yYa+g8ts4e6a3tvf/+v7Jf2J7b4na7vGN9aqAbBZaefzklFkd
W0FNib7hNLFv5cZ+A+m/9DKHBU2hYBjMqSHJd4aeHbZ6UUJbajyYxLUn0CoCISKQKgIhIpAqAiEikDERU5WDpbHBIy7wmGqK2TW9v24hPTZNoPVlyYe4cTlqfT27sp3tE0Nze4a4ncX4L3Su7DXImMyppvWZwR5Kj0iEvq28lR6u4hbmtjybQ/PNhoOtbKGH5tGyl
pJrYxx3tnl8dP494FXsTWqh1ARCBWB+Psi+XpyumaIyxonSbUDza07jqW/giLDuxmZzfPHTfN3a7nMUTbCXni17ut+6s9bCHeXX4le3jSn3ZZoubQ+0TuZ3F5Ik3uKaMTGZEploo5vmtHb2N5wdEu03VlJFk0piTXDEh14TgemfFPrqF7ZFQ7vaEZb2uVcaI53lcM
Z/CBl/Z13+FehES9eShLrZ4SLlwQi5U1PQqCmeCyAOi0IFYFQEYjrEKlef1J/Tvzk0AKIWmKM6VRtqJB112zpqg1omalCOCYjevi1sq74idCna0Y+8MMHWiYpLX5g6yMYuYhl+nNPSbqgH5ct0kzppy857fwVCaCIxZecFgv53kBchEtOPAn8mQR1vxAqAqEiECoC
oSIQKgKhIhBfUaRe2zr7C0Q4Yzfa0iwrV6vxkc228piYg7sw5dpUabKmiXhLhCnAEHGRP/LajXPguy1A/zERZe6aalt8TVrXEokwpdBRbUvf7XEprk2kx/Y2N/xR+m1vk4n03N4m666e29tkIn23t/kWRei3vU1sVipDyd/LHWpWLoWKQFyPyMvLi//UDdHvhE17n
5+TDjyEikCoCIRY5HdQVx6Pj4/+P3HU/UKoCIRQpOerN3gKh+n3bMLERc7w6o14d53h1RtxkXO8esO3KEC/ZxNG+HzS/dmEUQMJoSIQ1yLSf9O3uCUfG4ztgW767tRd6KbvDiIdNn2zWQnjDeSR7UL2OTD4mHTY9I13V4dN3x3GBN/03Wl2oZu+1Z9AqAiEikD8X0
SI/gOktxndYMeq9gAAAABJRU5ErkJggg=="/>` 
}
document.getElementById('re').innerHTML = D }
function handle(name) {
if(colorClicker == false) {
dydy(name); nowC(R,G,B,A) }
else {
localStorage.setItem(name," ")
hm()
 }
}
function save() {
localStorage.setItem("t" + i,R + ',' + G + ',' + B + ',' + A + ',')
get(null,'cont3').display = 'none';
hm()
}
function dydy(nam) {
function f(e,name) { var g = ' '; sp = e; for(var t = e; localStorage.getItem(name)[t] != ","; t++) { sp++
g = g + localStorage.getItem(name)[t] } return eval(g) }
R = f(0,nam); G = f(sp + 1,nam); B = f(sp + 1,nam); A = f(sp + 1,nam); 
ra = (1- A) * j
return 'rgba(' + R + ',' + G + ',' + B + ',' + A + ')'
}
pc.ondblclick = function() { pc.style.display = 'none' }
get(null,'ra','em').ondblclick = function() { get(null,'ra','em').style.display = 'none' }
var fd = 0
function contrastImage(imageData, contrast) {  // contrast input as percent; range [-1..1]
    var data = imageData.data;  // Note: original dataset modified directly!
    contrast *= 255;
    var factor = (contrast + 255) / (255.01 - contrast);  //add .1 to avoid /0 error.

    for(var i=0;i<data.length;i+=4)
    {
        data[i] = factor * (data[i] - 128) + 128;
        data[i+1] = factor * (data[i+1] - 128) + 128;
        data[i+2] = factor * (data[i+2] - 128) + 128;
    }
    return imageData;  //optional (e.g. for filter function chaining)
}
</script>
<script type="text/javascript">
var fute = 0;
function savecanv() {
fute++
imgDatas[fute] = []
imgDatas[fute][0] = ctx.getImageData(0,0,bc.width,bc.height) 
imgDatas[fute][1] = 'bc.width = ' + bc.width + '; bc.height = ' + bc.height+ ';'
}
var ffa,ffb
function trytext() {
var tf = document.getElementById('filltext')
ffa = (fixA - 30) 
ffb = (fixB)
tf.style.height = (wd/4 - 4) + 'px'
tf.style.fontSize = (wd/4 - 10) + 'px'
tf.style.marginLeft = ffa + 'px'
tf.style.marginTop = (ffb + (wd/4 - 4)/2) + 'px'
tf.style.display = 'block'; made = 3
}
function textFill() {
document.getElementById('filltext').style.display = 'none'; made = true
ctx.font = (wd/4 - 10) + 'px' + ' Verdana'
ctx.fillText(document.getElementById('filltext').value,ffa - lf,(ffb + (wd/4 - 4)/2) - tp)
savecanv()
}
;['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
  document.getElementById('k').addEventListener(eventName, preventDefaults, false)
})
function preventDefaults (e) {
  e.preventDefault()
  e.stopPropagation()
}
  document.getElementById('k').addEventListener('drop', handleDrop, false)
function handleDrop(e) {
  let dt = e.dataTransfer
  let files = dt.files
  handleFiles(files)
}
function handleFiles(files) {
  //([...files]).forEach(previewFile)
  files = [...files]
  files.forEach(previewFile)
}
function previewFile(file) {
let reader = new FileReader()
  reader.readAsDataURL(file)
  reader.onloadend = function() {
document.getElementById('view').innerHTML = `<img width="120" height="120"
 onclick="formt()" src="` + reader.result + `"/>`
Url = reader.result
  }
}
</script> 
</body>
</html>